<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lume — Cabelos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 font-inter">

  <header class="bg-white shadow p-4">
    <h1 class="text-2xl font-bold text-pink-500">Lume — Beleza</h1>
  </header>

  <main class="container mx-auto p-6">

    <h2 class="text-3xl font-bold text-gray-700 mb-6">Produtos para Cabelos</h2>

    <div class="grid md:grid-cols-3 gap-6">
      <!-- PRODUTO 1 -->
      <div class="bg-white p-4 rounded-2xl shadow hover:shadow-lg transition">
        <img src="https://via.placeholder.com/420x280?text=Shampoo+Nutritivo" class="rounded-xl w-full" alt="Shampoo Nutritivo">
        <h3 class="mt-3 text-lg font-semibold">Shampoo Nutritivo</h3>
        <p class="text-gray-600 text-sm">Rico em vitaminas, mantém os fios hidratados e fortes.</p>
        <p class="mt-2 font-bold text-pink-500">R$ <span id="price-10">39,90</span></p>
        <label class="mt-2 text-sm">Quantidade</label>
        <input id="qtd-10" type="number" min="1" value="1"
               class="border rounded px-2 py-1 w-20"
               oninput="updatePrice(39.9, 'qtd-10', 'price-10')">
        <button onclick="buyNow('Shampoo Nutritivo', 'qtd-10', 39.9)"
                class="mt-4 w-full bg-pink-500 text-white px-4 py-2 rounded-xl hover:bg-pink-600 transition">
          Comprar
        </button>
      </div>

      <!-- PRODUTO 2 -->
      <div class="bg-white p-4 rounded-2xl shadow hover:shadow-lg transition">
        <img src="https://via.placeholder.com/420x280?text=Condicionador+Hidratante" class="rounded-xl w-full" alt="Condicionador Hidratante">
        <h3 class="mt-3 text-lg font-semibold">Condicionador Hidratante</h3>
        <p class="text-gray-600 text-sm">Hidrata profundamente e deixa os fios macios.</p>
        <p class="mt-2 font-bold text-pink-500">R$ <span id="price-11">45,90</span></p>
        <label class="mt-2 text-sm">Quantidade</label>
        <input id="qtd-11" type="number" min="1" value="1"
               class="border rounded px-2 py-1 w-20"
               oninput="updatePrice(45.9, 'qtd-11', 'price-11')">
        <button onclick="buyNow('Condicionador Hidratante', 'qtd-11', 45.9)"
                class="mt-4 w-full bg-pink-500 text-white px-4 py-2 rounded-xl hover:bg-pink-600 transition">
          Comprar
        </button>
      </div>

      <!-- PRODUTO 3 -->
      <div class="bg-white p-4 rounded-2xl shadow hover:shadow-lg transition">
        <img src="https://via.placeholder.com/420x280?text=Máscara+Reconstrutora" class="rounded-xl w-full" alt="Máscara Reconstrutora">
        <h3 class="mt-3 text-lg font-semibold">Máscara Reconstrutora</h3>
        <p class="text-gray-600 text-sm">Repara cabelos danificados e fortalece os fios.</p>
        <p class="mt-2 font-bold text-pink-500">R$ <span id="price-12">79,90</span></p>
        <label class="mt-2 text-sm">Quantidade</label>
        <input id="qtd-12" type="number" min="1" value="1"
               class="border rounded px-2 py-1 w-20"
               oninput="updatePrice(79.9, 'qtd-12', 'price-12')">
        <button onclick="buyNow('Máscara Reconstrutora', 'qtd-12', 79.9)"
                class="mt-4 w-full bg-pink-500 text-white px-4 py-2 rounded-xl hover:bg-pink-600 transition">
          Comprar
        </button>
      </div>

      <!-- Mais produtos podem ser adicionados aqui seguindo o mesmo padrão -->
    </div>
  </main>

  <script>
    function updatePrice(unitPrice, inputId, priceId) {
      const qtd = parseInt(document.getElementById(inputId).value) || 1;
      const total = (unitPrice * qtd).toFixed(2).replace(".", ",");
      document.getElementById(priceId).textContent = total;
    }

    async function buyNow(title, inputId, unitPrice) {
      const qtd = parseInt(document.getElementById(inputId).value) || 1;
      try {
        const response = await fetch('https://minha-loja-beleza.onrender.com/create_preference', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ title, quantity: qtd, unitPrice })
        });
        const data = await response.json();
        if (data.init_point) {
          window.open(data.init_point, "_blank");
        } else {
          alert("Erro ao criar preferência de pagamento");
          console.log(data);
        }
      } catch (err) {
        alert("Erro de conexão com servidor");
        console.error(err);
      }
    }
  </script>

</body>
</html>
